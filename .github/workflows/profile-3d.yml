name: GitHub-Profile-3D-Contrib

on:
  schedule:           # 매일 동작 (예: 18:00 UTC = 한국시간 다음날 03:00)
    - cron: "5 15 * * *"
  workflow_dispatch:  # 수동 실행 버튼

permissions:
  contents: write     # 커밋/푸시에 필요

jobs:
  build:
    runs-on: ubuntu-latest
    name: generate-github-profile-3d-contrib
    steps:
      - uses: actions/checkout@v4
      - uses: yoshi389111/github-profile-3d-contrib@latest
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}    # 기본 토큰(공개 기여만)
          USERNAME: ${{ github.repository_owner }}
      - name: Commit & Push
        run: |
          git config user.name "${{ github.repository_owner }}"
          git config user.email "${{ github.repository_owner }}@users.noreply.github.com"
          git add -A .
          if git commit -m "generated"; then
            git push
          fi
